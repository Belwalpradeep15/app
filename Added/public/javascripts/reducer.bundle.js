!function(t){var e={};function r(i){if(e[i])return e[i].exports;var n=e[i]={i:i,l:!1,exports:{}};return t[i].call(n.exports,n,n.exports,r),n.l=!0,n.exports}r.m=t,r.c=e,r.d=function(t,e,i){r.o(t,e)||Object.defineProperty(t,e,{enumerable:!0,get:i})},r.r=function(t){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},r.t=function(t,e){if(1&e&&(t=r(t)),8&e)return t;if(4&e&&"object"==typeof t&&t&&t.__esModule)return t;var i=Object.create(null);if(r.r(i),Object.defineProperty(i,"default",{enumerable:!0,value:t}),2&e&&"string"!=typeof t)for(var n in t)r.d(i,n,function(e){return t[e]}.bind(null,n));return i},r.n=function(t){var e=t&&t.__esModule?function(){return t.default}:function(){return t};return r.d(e,"a",e),e},r.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},r.p="",r(r.s=125)}({102:function(t,e,r){"use strict";var i,n=this&&this.__extends||(i=function(t,e){return(i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var r in e)e.hasOwnProperty(r)&&(t[r]=e[r])})(t,e)},function(t,e){function r(){this.constructor=t}i(t,e),t.prototype=null===e?Object.create(e):(r.prototype=e.prototype,new r)});Object.defineProperty(e,"__esModule",{value:!0});var o=function(t){function e(e){e.callbacks;var r=e.width,i=void 0===r?10:r,n=e.time,o=void 0===n?10:n,a=e.mode,s=void 0===a?"magnitude":a,h=t.call(this)||this;return h._rawFibreShots=[],h.setModes=function(){this._modes={magnitude:{name:"Peak to peak",func:function(t){for(var e=0,r=0,i=0;i<this.widthFactor;++i)for(var n=0;n<this._rawFibreShots.length;++n)e=Math.max(e,this._rawFibreShots[n].amplitudes[t+i]),r=Math.min(r,this._rawFibreShots[n].amplitudes[t+i]);return[r,e]}.bind(this)},nth:{name:"Nth",func:function(t){for(var e=null,r=null,i=0;i<this.widthFactor;++i){for(var n=0;n<this._rawFibreShots.length;++n)this._rawFibreShots[n].amplitudes[t+i]>=0?e=this._rawFibreShots[n].amplitudes[t+i]:r=this._rawFibreShots[n].amplitudes[t+i];if(e&&r)break}return r||(r=e),e||(e=r),[r,e]}.bind(this)},mean:{name:"Average",func:function(t){for(var e=0,r=0,i=0,n=0,o=0;o<this.widthFactor;++o)for(var a=0;a<this._rawFibreShots.length;++a)this._rawFibreShots[a].amplitudes[t+o]>=0?(e+=this._rawFibreShots[a].amplitudes[t+o],i++):(r+=Math.abs(this._rawFibreShots[a].amplitudes[t+o]),n++);var s=r/Math.max(1,n)*-1,h=e/Math.max(1,i);return 0===n&&(s=h),0===i&&(h=s),[s,h]}.bind(this)},mode:{name:"Most frequent",func:function(t){for(var e={},r={},i=0,n=0,o=0,a=0,s=0,h=0,u=0;u<this.widthFactor;++u)for(var c=0;c<this._rawFibreShots.length;++c){var f=this._rawFibreShots[c].amplitudes[t+u];f>=0?(e[f]=(e[f]||0)+1,h++,i<e[f]&&(i=e[f],o=f)):(r[f]=(r[f]||0)+1,s++,n<r[f]&&(n=r[f],a=f))}return 0===s&&(a=o),0===h&&(o=a),[a,o]}.bind(this)}}},h.setModes(),h.setMode(s),h.setWidth(i),h.setTime(o),h}return n(e,t),e.prototype.setWidth=function(t){this.widthFactor=t},e.prototype.setTime=function(t){this.timeFactor=t},e.prototype.setMode=function(t){this._modes[t]&&(this.mode=t)},e.prototype.clear=function(){this._rawFibreShots.length=0},e.prototype.add=function(t){var e=!1;if(this._rawFibreShots.length>0&&(this._rawFibreShots[0].channel!==t.channel||this._rawFibreShots[0].startingPosition!==t.startingPosition||this._rawFibreShots[0].amplitudes.length!==t.amplitudes.length||t.time<this._rawFibreShots[0].time||Math.abs(t.time-this._rawFibreShots[0].time)>1e4)&&(e=!0),e||this._rawFibreShots.push(t),this._rawFibreShots.length>=this.timeFactor||e){for(var r=[],i=0;i<this._rawFibreShots[0].amplitudes.length;i+=this.widthFactor){var n=this._modes[this.mode].func(i);Math.abs(n[0])>Math.abs(n[1])?r.push(n[0]):r.push(n[1])}this._rawFibreShots[0].amplitudes=r,this.command("run","added",this._rawFibreShots[0]),this._rawFibreShots.length=0}e&&this._rawFibreShots.push(t)},e}(r(86).Ant);e.default=o},125:function(t,e,r){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var i=new(r(102).default)({});onmessage=i.message.bind(i)},86:function(t,e,r){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var i=function(){function t(){}return t.prototype.message=function(t){var e=t.data.command,r=t.data.params;switch(e){case"get":this.command("get",r.key,this[r.key]);break;case"set":this[r.key]=r.params,this.command("set",r.key,this[r.key]);break;case"run":var i=this[r.key](r.params);this.command("run",r.key,i)}},t.prototype.command=function(t,e,r){postMessage({command:t,key:e,params:r})},t}();e.Ant=i;var n=function(){function t(t,e,r){var i=this;void 0===r&&(r=null),this.awaitingReply={},this.callbacks={};var n=new t(r),o=Object.getPrototypeOf(n);Object.getOwnPropertyNames(n).forEach((function(t){Object.getOwnPropertyDescriptor(n,t);Object.defineProperty(i,t,{get:function(){return i.get(t)},set:function(e){i.set(t,e)},enumerable:!0})})),Object.getOwnPropertyNames(o).forEach((function(t){if("function"===typeof n[t]){if(["constructor","register"].includes(t))return;i[t]=function(e){return i.run(t,e)}}})),r.callbacks&&(this.callbacks=r.callbacks),this.worker=null;var a=this;this.worker=new Worker(e),this.worker.onmessage=function(t){a.acceptMessage(t.data)}}return t.prototype.get=function(t){return this.command("get",t)},t.prototype.set=function(t,e){return this.command("set",t,e)},t.prototype.run=function(t,e){return this.command("run",t,e)},t.prototype.acceptMessage=function(t){t.command;var e=t.key,r=t.params;if(this.awaitingReply[e])this.awaitingReply[e].forEach((function(t){t.resolve(r)})),this.awaitingReply[e]=[];else if(this.callbacks[e])return this.callbacks[e](t.params)},t.prototype.register=function(t,e){this.callbacks[t]=e},t.prototype.command=function(t,e,r){var i=this;return void 0===r&&(r=null),new Promise((function(n,o){i.worker&&(i.awaitingReply[e]=i.awaitingReply[e]||[],i.awaitingReply[e].push({resolve:n,reject:o}),i.worker.postMessage({command:t,params:{key:e,params:r}}))}))},t}();e.Queen=n}});
//# sourceMappingURL=reducer.bundle.js.map