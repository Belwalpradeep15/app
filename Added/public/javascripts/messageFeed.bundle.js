!function(t){var e={};function n(o){if(e[o])return e[o].exports;var i=e[o]={i:o,l:!1,exports:{}};return t[o].call(i.exports,i,i.exports,n),i.l=!0,i.exports}n.m=t,n.c=e,n.d=function(t,e,o){n.o(t,e)||Object.defineProperty(t,e,{enumerable:!0,get:o})},n.r=function(t){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},n.t=function(t,e){if(1&e&&(t=n(t)),8&e)return t;if(4&e&&"object"==typeof t&&t&&t.__esModule)return t;var o=Object.create(null);if(n.r(o),Object.defineProperty(o,"default",{enumerable:!0,value:t}),2&e&&"string"!=typeof t)for(var i in t)n.d(o,i,function(e){return t[e]}.bind(null,i));return o},n.n=function(t){var e=t&&t.__esModule?function(){return t.default}:function(){return t};return n.d(e,"a",e),e},n.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},n.p="",n(n.s=113)}({10:function(t,e,n){"use strict";var o=n(5).a.Symbol;e.a=o},113:function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var o=n(65),i=function(){function t(t){this.buffer=[],this.timeout=null,this.url=null,this.reconnectOnClose=!1,this.rateLimits={},this._retry=null}return t.prototype.connect=function(t){var e=this;try{if(this.socket&&this.socket.readyState===this.socket.OPEN)return void console.warn("Connection already present");this.url=t,this.reconnectOnClose=!0;var n=function(){var e=this;this._retry&&clearTimeout(this._retry),this._retry=setTimeout((function(){e.connect(t)}),3e3)}.bind(this);if(this.socket&&this.socket.readyState!==this.socket.CLOSED)return console.warn("Socket is currently closing, or otherwise occupied.. waiting a while..",this._retry),void n();if(this.socket=new WebSocket("ws://"+t),!this.socket)throw"Could not connect";this.socket.addEventListener("message",this.message.bind(this)),this.socket.addEventListener("error",(function(t){e.send({_error:"Connection failed"}),e.error(),n()})),this.socket.addEventListener("open",(function(){e.send({_status:"connected"}),e.sendToUnit()})),this.socket.addEventListener("close",(function(){e.send({_status:"disconnected"}),e.closed(),n()}))}catch(t){console.error("Connection failed",t.message)}},t.prototype.error=function(t){void 0===t&&(t=null),console.log("Websocket connection error ",t)},t.prototype.closed=function(){this.reconnectOnClose&&this.connect(this.url)},t.prototype.disconnect=function(){this.reconnectOnClose=!1,this.socket.close()},t.prototype.limit=function(t,e){var n=this,i=0,r=o.default((function(t){t._count=i,n.send(t),i=0}),e);this.rateLimits[t.toLowerCase()]=function(t){return i++,r(t)}},t.prototype.message=function(t){var e=this,n=JSON.parse(t.data);try{var o=this.rateLimits[n.object_type.toLowerCase()]||function(t){t._count=1,e.send(t)};switch(n.object_type){case"Heartbeat":default:o(n)}}catch(t){console.warn("Unable to send",t.message)}},t.prototype.send=function(t){var e=null;t&&"object"==typeof t&&"FibreShot"===t.object_type&&(t.amplitudes=new Float32Array(t.amplitudes),e=t.amplitudes.buffer),e?postMessage(t,[e]):postMessage(t)},t.prototype.sendToUnit=function(t){var e=this;if(void 0===t&&(t=null),this.socket&&this.socket.readyState!==WebSocket.OPEN){if(clearTimeout(this.timeout),t&&this.buffer.push(t),this.socket.readyState===WebSocket.CLOSED||this.socket.readyState===WebSocket.CLOSING)return;this.timeout=setTimeout(this.sendToUnit.bind(this),1e3)}else this.buffer.forEach((function(t){e.socket.send(t)})),this.buffer.length=0,this.socket&&t&&this.socket.send(t)},t}();e.MessageFeedSocket=i;var r=new i("ws://localhost:57006");onmessage=function(t){if(r){var e=t.data;if(e.command)switch(e.command){case"connect":r.connect(e.url);break;case"disconnect":r.disconnect();break;case"limit":r.limit(e.type,e.wait)}else r.sendToUnit(JSON.stringify(e))}}},12:function(t,e,n){"use strict";var o=n(7),i=n(3),r="[object Symbol]";e.a=function(t){return"symbol"==typeof t||Object(i.a)(t)&&Object(o.a)(t)==r}},15:function(t,e,n){"use strict";var o=n(2),i=n(12),r=NaN,c=/^\s+|\s+$/g,s=/^[-+]0x[0-9a-f]+$/i,a=/^0b[01]+$/i,u=/^0o[0-7]+$/i,f=parseInt;e.a=function(t){if("number"==typeof t)return t;if(Object(i.a)(t))return r;if(Object(o.a)(t)){var e="function"==typeof t.valueOf?t.valueOf():t;t=Object(o.a)(e)?e+"":e}if("string"!=typeof t)return 0===t?t:+t;t=t.replace(c,"");var n=a.test(t);return n||u.test(t)?f(t.slice(2),n?2:8):s.test(t)?r:+t}},2:function(t,e,n){"use strict";e.a=function(t){var e=typeof t;return null!=t&&("object"==e||"function"==e)}},3:function(t,e,n){"use strict";e.a=function(t){return null!=t&&"object"==typeof t}},39:function(t,e,n){"use strict";var o=n(5);e.a=function(){return o.a.Date.now()}},47:function(t,e,n){"use strict";var o=n(2),i=n(39),r=n(15),c="Expected a function",s=Math.max,a=Math.min;e.a=function(t,e,n){var u,f,l,d,h,p,b=0,v=!1,y=!1,m=!0;if("function"!=typeof t)throw new TypeError(c);function O(e){var n=u,o=f;return u=f=void 0,b=e,d=t.apply(o,n)}function j(t){var n=t-p;return void 0===p||n>=e||n<0||y&&t-b>=l}function g(){var t=Object(i.a)();if(j(t))return k(t);h=setTimeout(g,function(t){var n=e-(t-p);return y?a(n,l-(t-b)):n}(t))}function k(t){return h=void 0,m&&u?O(t):(u=f=void 0,d)}function w(){var t=Object(i.a)(),n=j(t);if(u=arguments,f=this,p=t,n){if(void 0===h)return function(t){return b=t,h=setTimeout(g,e),v?O(t):d}(p);if(y)return clearTimeout(h),h=setTimeout(g,e),O(p)}return void 0===h&&(h=setTimeout(g,e)),d}return e=Object(r.a)(e)||0,Object(o.a)(n)&&(v=!!n.leading,l=(y="maxWait"in n)?s(Object(r.a)(n.maxWait)||0,e):l,m="trailing"in n?!!n.trailing:m),w.cancel=function(){void 0!==h&&clearTimeout(h),b=0,u=p=f=h=void 0},w.flush=function(){return void 0===h?d:k(Object(i.a)())},w}},5:function(t,e,n){"use strict";var o=n(61),i="object"==typeof self&&self&&self.Object===Object&&self,r=o.a||i||Function("return this")();e.a=r},61:function(t,e,n){"use strict";(function(t){var n="object"==typeof t&&t&&t.Object===Object&&t;e.a=n}).call(this,n(64))},64:function(t,e){var n;n=function(){return this}();try{n=n||new Function("return this")()}catch(t){"object"==typeof window&&(n=window)}t.exports=n},65:function(t,e,n){"use strict";n.r(e);var o=n(47),i=n(2),r="Expected a function";e.default=function(t,e,n){var c=!0,s=!0;if("function"!=typeof t)throw new TypeError(r);return Object(i.a)(n)&&(c="leading"in n?!!n.leading:c,s="trailing"in n?!!n.trailing:s),Object(o.a)(t,e,{leading:c,maxWait:e,trailing:s})}},7:function(t,e,n){"use strict";var o=n(10),i=Object.prototype,r=i.hasOwnProperty,c=i.toString,s=o.a?o.a.toStringTag:void 0;var a=function(t){var e=r.call(t,s),n=t[s];try{t[s]=void 0;var o=!0}catch(t){}var i=c.call(t);return o&&(e?t[s]=n:delete t[s]),i},u=Object.prototype.toString;var f=function(t){return u.call(t)},l="[object Null]",d="[object Undefined]",h=o.a?o.a.toStringTag:void 0;e.a=function(t){return null==t?void 0===t?d:l:h&&h in Object(t)?a(t):f(t)}}});
//# sourceMappingURL=messageFeed.bundle.js.map